{% extends 'base.html' %}

{% block title %}–õ–æ–∫–∞—Ü–∏–∏{% endblock %}

{% block content %}
{% if not current_business %}
<div class="text-center py-12">
    <div class="text-6xl mb-4">üè¢</div>
    <h3 class="text-lg font-medium text-gray-900 mb-2">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –±–∏–∑–Ω–µ—Å</h3>
    <p class="text-gray-500 mb-6">–ß—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–æ–∫–∞—Ü–∏—è–º–∏, –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –±–∏–∑–Ω–µ—Å</p>
    <a href="{% url 'businesses:list' %}" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
        –ü–µ—Ä–µ–π—Ç–∏ –∫ –±–∏–∑–Ω–µ—Å–∞–º
    </a>
</div>
{% else %}
<div class="flex justify-between items-center mb-6">
    <div>
        <h1 class="text-2xl font-semibold">–õ–æ–∫–∞—Ü–∏–∏</h1>
        <p class="text-gray-600">{{ current_business.name }}</p>
    </div>
    <a href="{% url 'businesses:location_create' %}" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
        –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é
    </a>
</div>

<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for l in locations %}
    <div class="bg-white p-6 rounded-lg shadow border {% if not l.is_active %}opacity-60{% endif %}">
        <div class="flex items-start justify-between mb-4">
            <div class="flex-1">
                <h3 class="text-lg font-semibold mb-1">{{ l.name }}</h3>
                {% if l.address %}
                    <p class="text-sm text-gray-600 mb-2">{{ l.address }}</p>
                {% endif %}
                {% if l.geo_lat and l.geo_lng %}
                    <p class="text-xs text-gray-500">{{ l.geo_lat }}, {{ l.geo_lng }}</p>
                {% endif %}
            </div>
            <div class="flex items-center">
                {% if l.is_active %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        –ê–∫—Ç–∏–≤–Ω–∞
                    </span>
                {% else %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                        –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
                    </span>
                {% endif %}
            </div>
        </div>
        
        {% if l.opening_hours %}
        <div class="text-sm text-gray-600 mb-4">
            <p class="font-medium">–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:</p>
            <div class="text-xs mt-1">
                {% for day, hours in l.opening_hours.items %}
                    <div>{{ day }}: {{ hours }}</div>
                {% empty %}
                    <div class="text-gray-400">–ù–µ —É–∫–∞–∑–∞–Ω</div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        <div class="text-sm text-gray-500 mb-4">
            <p>–°–æ–∑–¥–∞–Ω–∞: {{ l.created_at|date:"d.m.Y" }}</p>
        </div>
        
        <div class="flex space-x-3">
            <a href="{% url 'businesses:location_edit' l.id %}" class="flex-1 text-center px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">
                –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
            </a>
        </div>
    </div>
    {% empty %}
    <div class="col-span-full">
        <div class="text-center py-12">
            <div class="text-6xl mb-4">üìç</div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">–ü–æ–∫–∞ –Ω–µ—Ç –ª–æ–∫–∞—Ü–∏–π</h3>
            <p class="text-gray-500 mb-6">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –ª–æ–∫–∞—Ü–∏—é –¥–ª—è {{ current_business.name }}</p>
            <a href="{% url 'businesses:location_create' %}" class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é –ª–æ–∫–∞—Ü–∏—é
            </a>
        </div>
    </div>
    {% endfor %}
</div>

{% if locations %}
<div class="mt-8 bg-green-50 border border-green-200 rounded-lg p-4">
    <div class="flex">
        <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
            </svg>
        </div>
        <div class="ml-3">
            <h3 class="text-sm font-medium text-green-800">–ü–æ–¥—Å–∫–∞–∑–∫–∞</h3>
            <p class="mt-1 text-sm text-green-700">
                –í –∫–∞–∂–¥–æ–π –ª–æ–∫–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –∫–∞—Ä—Ç, —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
            </p>
        </div>
    </div>
</div>
{% endif %}
{% endif %}
{% endblock %}
